<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>hidden-markov-music.hmm documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Hidden-markov-music 0.1.1 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hidden-markov-music</span></div></div></li><li class="depth-2 branch"><a href="hidden-markov-music.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="hidden-markov-music.hmm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hmm</span></div></a></li><li class="depth-2 branch"><a href="hidden-markov-music.midi.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>midi</span></div></a></li><li class="depth-2 branch"><a href="hidden-markov-music.random.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>random</span></div></a></li><li class="depth-2"><a href="hidden-markov-music.stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stats</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="hidden-markov-music.hmm.html#var--.3EHMM"><div class="inner"><span>-&gt;HMM</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-backward-probability-prev"><div class="inner"><span>backward-probability-prev</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-backward-probability-seq"><div class="inner"><span>backward-probability-seq</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-forward-probability-initial"><div class="inner"><span>forward-probability-initial</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-forward-probability-next"><div class="inner"><span>forward-probability-next</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-forward-probability-seq"><div class="inner"><span>forward-probability-seq</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-likelihood-backward"><div class="inner"><span>likelihood-backward</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-likelihood-forward"><div class="inner"><span>likelihood-forward</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-map-.3EHMM"><div class="inner"><span>map-&gt;HMM</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-random-emission"><div class="inner"><span>random-emission</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-random-hmm"><div class="inner"><span>random-hmm</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-random-initial-state"><div class="inner"><span>random-initial-state</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-random-transition"><div class="inner"><span>random-transition</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-sample-emissions"><div class="inner"><span>sample-emissions</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-sample-states"><div class="inner"><span>sample-states</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-state-path-initial"><div class="inner"><span>state-path-initial</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-state-path-next"><div class="inner"><span>state-path-next</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-state-path-seq"><div class="inner"><span>state-path-seq</span></div></a></li><li class="depth-1"><a href="hidden-markov-music.hmm.html#var-viterbi-path"><div class="inner"><span>viterbi-path</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">hidden-markov-music.hmm</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var--.3EHMM"><h3>-&gt;HMM</h3><div class="usage"><code>(-&gt;HMM states observations transition-prob observation-prob initial-prob)</code></div><div class="doc"><div class="markdown"><p>Positional factory function for class hidden_markov_music.hmm.HMM. Constructs a representation of a hidden Markov model.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L6">view source</a></div></div><div class="public anchor" id="var-backward-probability-prev"><h3>backward-probability-prev</h3><div class="usage"><code>(backward-probability-prev model obs beta-next)</code></div><div class="doc"><div class="markdown"><p>Returns <code>β_t(i)</code>, for all states <code>i</code>, for <code>t &lt; T</code>.</p><p>This is the probability of observing the partial observation sequence, <code>o_{t+1}, ..., o_T</code>, conditional on being in state <code>i</code> at time <code>t</code>. Depends on the model, <code>β_{t+1}(j)</code>, and the next observation <code>o_{t+1}</code>.</p><p>Output is in the format</p>
<pre><code>{:state-1 β_t(1),
 :state-2 β_t(2),
 ...
 :state-N β_t(N)}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L121">view source</a></div></div><div class="public anchor" id="var-backward-probability-seq"><h3>backward-probability-seq</h3><div class="usage"><code>(backward-probability-seq model observations)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy seq of <code>β_T(i), β_{T-1}(i), ..., β_1(i)</code>, where <code>β_t(i)</code> is the probability of observing <code>o_{t+1}, ..., o_T</code>, given that the system is in state <code>s_i</code> at time <code>t</code>.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L167">view source</a></div></div><div class="public anchor" id="var-forward-probability-initial"><h3>forward-probability-initial</h3><div class="usage"><code>(forward-probability-initial model obs)</code></div><div class="doc"><div class="markdown"><p>Returns <code>α_1(i)</code>, for all states <code>i</code>.</p><p>This is the probability of initially being in state <code>i</code> after observing the initial observation, <code>o_1</code>. Depends only on the model and initial observation.</p><p>Output is in the format</p>
<pre><code>{:state-1 α_1(1),
 :state-2 α_1(2),
 ...
 :state-N α_1(N)}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L30">view source</a></div></div><div class="public anchor" id="var-forward-probability-next"><h3>forward-probability-next</h3><div class="usage"><code>(forward-probability-next model obs alpha-prev)</code></div><div class="doc"><div class="markdown"><p>Returns <code>α_t(i)</code>, for all states <code>i</code>, for <code>t &gt; 1</code>, where <code>α_t(i)</code> is the probability of being in state <code>s_i</code> at time <code>t</code> after observing the sequence <code>o_1, o_2, ..., o_t</code>. Depends on the model <code>λ</code>, previous forward probability <code>α_{t-1}(i)</code>, and current observation <code>o_t</code>.</p><p>Output is in the format</p>
<pre><code>{s_1 α_t(1),
 s_2 α_t(2),
 ...
 s_N α_t(N)}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L52">view source</a></div></div><div class="public anchor" id="var-forward-probability-seq"><h3>forward-probability-seq</h3><div class="usage"><code>(forward-probability-seq model observations)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy seq of <code>α_1(i), α_2(i), ..., α_T(i)</code>, where <code>α_t(i)</code> is the probability of being in state <code>s_i</code> at time <code>t</code> after observing the sequence <code>o_1, o_2, ..., o_t</code>.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L95">view source</a></div></div><div class="public anchor" id="var-likelihood-backward"><h3>likelihood-backward</h3><div class="usage"><code>(likelihood-backward model observations)</code></div><div class="doc"><div class="markdown"><p>Returns <code>P[O|λ]</code>, using the backward algorithm.</p><p>This is the likelihood of the observed sequence <code>O</code> given the model <code>λ</code>.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L181">view source</a></div></div><div class="public anchor" id="var-likelihood-forward"><h3>likelihood-forward</h3><div class="usage"><code>(likelihood-forward model observations)</code></div><div class="doc"><div class="markdown"><p>Returns <code>P[O|λ]</code>, using the forward algorithm.</p><p>This is the likelihood of the observed sequence <code>O</code> given the model <code>λ</code>.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L109">view source</a></div></div><div class="public anchor" id="var-map-.3EHMM"><h3>map-&gt;HMM</h3><div class="usage"><code>(map-&gt;HMM m__5869__auto__)</code></div><div class="doc"><div class="markdown"><p>Factory function for class hidden_markov_music.hmm.HMM, taking a map of keywords to field values. Constructs a representation of a hidden Markov model.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L6">view source</a></div></div><div class="public anchor" id="var-random-emission"><h3>random-emission</h3><div class="usage"><code>(random-emission model state)</code></div><div class="doc"><div class="markdown"><p>Randomly emits an observation from the current state, weighed by the observation probability distribution.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L354">view source</a></div></div><div class="public anchor" id="var-random-hmm"><h3>random-hmm</h3><div class="usage"><code>(random-hmm states observations)</code></div><div class="doc"><div class="markdown"><p>Returns a model with random probabilities, given the state and observation labels.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L19">view source</a></div></div><div class="public anchor" id="var-random-initial-state"><h3>random-initial-state</h3><div class="usage"><code>(random-initial-state model)</code></div><div class="doc"><div class="markdown"><p>Randomly selects an initial state from the model, weighed by the initial probability distribution.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L340">view source</a></div></div><div class="public anchor" id="var-random-transition"><h3>random-transition</h3><div class="usage"><code>(random-transition model state)</code></div><div class="doc"><div class="markdown"><p>Randomly selects a state to transition to from the current state, weighed by the transition probability distribution.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L346">view source</a></div></div><div class="public anchor" id="var-sample-emissions"><h3>sample-emissions</h3><div class="usage"><code>(sample-emissions model)</code><code>(sample-emissions model states)</code></div><div class="doc"><div class="markdown"><p>Randomly walks through the states of the model, returning an infinite lazy seq of emissions from those states. One can optionally provide predetermined states, and emissions will be made from it randomly.</p><p>See <a href="hidden-markov-music.hmm.html#var-sample-states">sample-states</a> and <a href="hidden-markov-music.hmm.html#var-random-emission">random-emission</a> for details.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L372">view source</a></div></div><div class="public anchor" id="var-sample-states"><h3>sample-states</h3><div class="usage"><code>(sample-states model)</code></div><div class="doc"><div class="markdown"><p>Randomly walks through the states of the model, returning an infinite lazy seq of those states.</p><p>See <a href="hidden-markov-music.hmm.html#var-random-initial-state">random-initial-state</a> and <a href="hidden-markov-music.hmm.html#var-random-transition">random-transition</a> for details on the decisions made at each step.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L362">view source</a></div></div><div class="public anchor" id="var-state-path-initial"><h3>state-path-initial</h3><div class="usage"><code>(state-path-initial model obs)</code></div><div class="doc"><div class="markdown"><p>Returns <code>ψ_1(i)</code> and <code>δ_1(i)</code>, for the given model <code>λ</code> and first observation <code>o_1</code>.</p><p>Output takes the form:</p>
<pre><code>{:delta δ_1(i),
 :psi   ψ_1(i)}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L197">view source</a></div></div><div class="public anchor" id="var-state-path-next"><h3>state-path-next</h3><div class="usage"><code>(state-path-next model obs delta-prev)</code></div><div class="doc"><div class="markdown"><p>Returns <code>ψ_t(i)</code> and <code>δ_t(i)</code>, for the given model <code>λ</code> and current observation <code>o_t</code>. Depends on the previous <code>δ_{t-1}(i)</code>.</p><p>Output takes the form:</p>
<pre><code>{:delta δ_t(i),
 :psi   ψ_t(i)}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L217">view source</a></div></div><div class="public anchor" id="var-state-path-seq"><h3>state-path-seq</h3><div class="usage"><code>(state-path-seq model observations)</code></div><div class="doc"><div class="markdown"><p>Returns a lazy seq of previous states paired with their probabilities, <code>[ψ_1(i) δ_1(i)], ... [ψ_T(i) δ_T(i)]</code>, where <code>ψ_t(i)</code> is a mapping from state <code>i</code> to the state <code>j</code> which most likely preceded it, and <code>δ_t(i)</code> is a mapping from state <code>i</code> to the probability of the most likely state path leading up to it from state <code>j</code>.</p></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L274">view source</a></div></div><div class="public anchor" id="var-viterbi-path"><h3>viterbi-path</h3><div class="usage"><code>(viterbi-path model observations)</code></div><div class="doc"><div class="markdown"><p>Returns one of the state sequences <code>Q</code> which maximizes <code>P[Q|O,λ]</code>, along with the likelihood itself, <code>P[Q|O,λ]</code>. There are potentially many such paths, all with equal likelihood, and one of those is chosen arbitrarily.</p><p>This is accomplished by means of the Viterbi algorithm, and takes into account that <code>q_t</code> depends on <code>q_{t-1}</code>, and not just <code>o_t</code>, avoiding impossible state sequences.</p><p>Output takes the form:</p>
<pre><code>{:likelihood     P[Q|O,λ],
 :state-sequence Q}
</code></pre></div></div><div class="src-link"><a href="https://github.com/dwysocki/hidden-markov-music/tree/master/src/hidden_markov_music/hmm.clj#L303">view source</a></div></div></div></body></html>